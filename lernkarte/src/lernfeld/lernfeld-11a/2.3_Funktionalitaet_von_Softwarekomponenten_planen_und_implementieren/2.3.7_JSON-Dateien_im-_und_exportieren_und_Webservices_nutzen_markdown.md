# 2.3.7 JSON-Dateien im- und exportieren und Webservices nutzen

<html>
<head>
<style>
h1, h2, h3 {
  border-bottom: 2px solid #444;
  padding-bottom: 4px;
  margin-top: 30px;
}
code, pre {
  background: #f4f4f4;
  padding: 6px 10px;
  border-radius: 6px;
  font-family: "Consolas", monospace;
  color: #222;
}
ul {
  list-style-type: square;
  margin-left: 20px;
}
blockquote {
  border-left: 4px solid #888;
  padding-left: 10px;
  color: #333;
  font-style: italic;
}
table {
  border-collapse: collapse;
  width: 100%;
  margin: 10px 0;
}
th, td {
  border: 1px solid #ddd;
  padding: 8px;
}
th {
  background-color: #f0f0f0;
}
</style>
</head>
<body>

<h1>2.3.7 JSON-Dateien im- und exportieren und Webservices nutzen</h1>

<h2>Grundlagen</h2>
<ul>
  <li>Softwarekomponenten tauschen Daten über <strong>Schnittstellen</strong> aus (Dateien, APIs, Webdienste).</li>
  <li>JSON („JavaScript Object Notation“) ist ein <strong>Standardformat</strong> zum Austausch strukturierter Daten.</li>
  <li>Vorteile: einfach lesbar, leicht zu verarbeiten, plattformunabhängig.</li>
  <li>Wird häufig in <strong>REST-APIs</strong> als Antwortformat genutzt.</li>
</ul>

<h2>1. JSON-Dateien lesen und schreiben</h2>

<h3>Export von JSON-Dateien in Python</h3>
<pre><code>import json

liegeplatz_mietdaten = {
"liegeplatzmietdaten": [
{"liegeplatz_nr": 1234, "mieter": "Frank Maier", "mietdatum": "20.05.2021"},
{"liegeplatz_nr": 999, "mieter": "Simone Schulz", "mietdatum": "05.03.2019"}
]
}

json_object = json.dumps(liegeplatz_mietdaten, indent=4)
print(json_object)

with open("beispiel.json", "w") as outfile:
json.dump(liegeplatz_mietdaten, outfile, indent=4) </code></pre>

<h3>Import von JSON-Dateien in Python</h3>
<pre><code>import json

f = open('beispiel.json')
data = json.load(f)

for i in data['liegeplatzmietdaten']:
print(i)

nummer = data['liegeplatzmietdaten'][0]['liegeplatz_nr']
mieter = data['liegeplatzmietdaten'][0]['mieter']

print("Liegeplatz:", nummer)
print("Mieter:", mieter)

f.close() </code></pre>

<blockquote>
Python bietet das integrierte Modul <code>json</code> für einfache Konvertierung zwischen Python-Objekten und JSON-Dateien.
</blockquote>

<h3>JSON in Java</h3>
<ul>
  <li>Über das Paket <code>javax.json</code> (Download erforderlich) können JSON-Dateien gelesen und geschrieben werden.</li>
  <li>Dokumentation: <a href="https://docs.oracle.com/javaee/7/api/javax/json/package-summary.html">Oracle – javax.json</a></li>
</ul>

<h2>2. Webservices und REST-API</h2>

<h3>Architektur einer REST-Anwendung</h3>
<p>REST folgt dem <strong>Client-Server-Prinzip</strong>:</p>
<ul>
  <li><strong>Client:</strong> z. B. Web-, Desktop- oder Mobile-App.</li>
  <li><strong>Server:</strong> REST-API empfängt HTTP-Anfragen (GET, POST, PUT, DELETE) und antwortet mit JSON-Daten und Statuscodes.</li>
  <li><strong>Datenquelle:</strong> Datenbank oder externe Systeme.</li>
</ul>

<h3>Wichtige HTTP-Methoden</h3>
<table>
  <tr><th>Methode</th><th>Zweck</th></tr>
  <tr><td><code>GET</code></td><td>Liest oder ruft Daten ab.</td></tr>
  <tr><td><code>POST</code></td><td>Erstellt oder aktualisiert Ressourcen.</td></tr>
  <tr><td><code>PUT</code></td><td>Erstellt oder ersetzt eine Ressource.</td></tr>
  <tr><td><code>DELETE</code></td><td>Löscht eine Ressource.</td></tr>
</table>

<blockquote>
Unterschied: <code>PUT</code> ist idempotent (mehrfache Anfragen ergeben dasselbe Ergebnis), <code>POST</code> nicht.
</blockquote>

<h3>HTTP-Statuscodes</h3>
<table>
  <tr><th>Kategorie</th><th>Beispiele</th><th>Bedeutung</th></tr>
  <tr><td>1XX</td><td>101</td><td>Information (z. B. Protokollwechsel)</td></tr>
  <tr><td>2XX</td><td>200, 201</td><td>Erfolg (OK, Ressource erstellt)</td></tr>
  <tr><td>3XX</td><td>301, 305</td><td>Umleitung</td></tr>
  <tr><td>4XX</td><td>400, 404, 415</td><td>Clientfehler (z. B. Ressource nicht gefunden)</td></tr>
  <tr><td>5XX</td><td>500, 501</td><td>Serverfehler</td></tr>
</table>

<h2>Beispiel: Nutzung einer REST-API in Python</h2>
<p>Abfrage von Wetterdaten über die API von <a href="https://openweathermap.org/">OpenWeatherMap</a>:</p>

<pre><code>import requests, json

API_key = "DEIN_API_KEY"
base_url = "https://api.openweathermap.org/data/2.5/weather?"
cityname = input("Geben Sie einen Ort ein: ")

url = f"{base_url}appid={API_key}&q={cityname}"
weather_data = requests.get(url).json()

json_object = json.dumps(weather_data, indent=4)
print("Aktuelle Wetterdaten von", cityname, ":")
print(json_object)
</code></pre>

<blockquote>
Die API liefert JSON-Daten, z. B. Temperatur, Luftdruck oder Wetterbeschreibung. Diese können im Programm weiterverarbeitet werden.
</blockquote>

<h2>Zusammenfassung – Prüfungsrelevant</h2>
<table>
  <tr><th>Thema</th><th>Kernaussage</th></tr>
  <tr><td>JSON</td><td>Standardformat zum Austausch strukturierter Daten (Textbasiert, leicht lesbar).</td></tr>
  <tr><td>REST-API</td><td>Ermöglicht Datenaustausch zwischen Clients und Servern über HTTP.</td></tr>
  <tr><td>HTTP-Methoden</td><td>GET, POST, PUT, DELETE steuern Aktionen auf Ressourcen.</td></tr>
  <tr><td>Statuscodes</td><td>Zeigen Ergebnis der HTTP-Anfrage (200 = OK, 404 = nicht gefunden, 500 = Serverfehler).</td></tr>
  <tr><td>Python-Module</td><td><code>json</code> für JSON-Verarbeitung, <code>requests</code> für Webservice-Zugriff.</td></tr>
</table>

<h3>Kompetenzcheck (Beispiel)</h3>
<ul>
  <li>a) ✔️ Import/Export über Dateien sind Schnittstellen für Softwarekomponenten.</li>
  <li>b) ✔️ JSON speichert Daten im Textformat.</li>
  <li>c) ❌ EXECUTE ist keine HTTP-Methode.</li>
  <li>d) ✔️ GET dient zum Abrufen von Daten.</li>
  <li>e) ✔️ DELETE löscht Ressourcen vom Server.</li>
  <li>f) ❌ 3xx-Codes sind Umleitungen, kein Erfolg.</li>
  <li>g) ❌ 4xx-Codes kennzeichnen Clientfehler, nicht Serverfehler.</li>
</ul>

</body>
</html>
