# ðŸ§  3.7.4 Das Basiswissen Ã¼ber SQL erweitern und anwenden [Seite: 275]

Ziel dieses Abschnitts ist, das vorhandene **SQL-Grundwissen** gezielt zu **erweitern** â€“ insbesondere bei **Abfragen Ã¼ber mehrere Tabellen**, dem **Kombinieren von Ergebnismengen**, **Unterabfragen** sowie der **Rechtevergabe**. Als durchgÃ¤ngiges Beispiel dient das relationale Modell **â€žOrtsverwaltungâ€œ** mit den Tabellen **Ort**, **Land** und **Kontinent**. 

| **Begriff** | **Definition / typische Anweisungen**                                                                                                                 |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| **DDL**     | **CREATE/DROP DATABASE**, **CREATE/ALTER/DROP TABLE** â€“ Strukturen anlegen/Ã¤ndern/lÃ¶schen.                                                            |
| **DML**     | **INSERT**, **UPDATE**, **DELETE** â€“ Daten einfÃ¼gen/Ã¤ndern/lÃ¶schen.                                                                                   |
| **DQL**     | **SELECT** mit **WHERE**, **ORDER BY**, **GROUP BY**, **Aggregaten** (**SUM**, **COUNT**, **AVG**, **MIN**, **MAX**), **LIKE**, Umgang mit **NULL**.  |

## ðŸ”— Abfragen Ã¼ber mehrere Tabellen (JOINs)

* **Zwei Varianten**:

  1. â€žklassischâ€œ: mehrere Tabellen in **FROM**, VerknÃ¼pfung Ã¼ber **WHERE** (PK=FK).
  2. â€žmodernâ€œ: **INNER JOIN** (und VerknÃ¼pfungsbedingung mit **ON**).
     Beide liefern bei identischer Bedingung die gleiche Ergebnismenge. 
* **Beispielidee**: LÃ¤nder in **Europa** aus **Land** und **Kontinent** (klassisch vs. **INNER JOIN**). **Drei-Tabellen-JOIN** analog (z. B. **Ort**â€“**Land**â€“**Kontinent**, zusÃ¤tzlich **LIKE 'B%'**). 
* **JOIN-Varianten** (modern): **INNER**, **LEFT**, **RIGHT**, **FULL** â€“ gleicher Syntaxrahmen, aber **unterschiedliche Ergebnismengen** (z. B. vollstÃ¤ndige linke/rechte Tabelle). 

## âž• Kombinieren von Ergebnismengen (UNION/UNION ALL)

* **UNION** vereint Ergebnismengen **zweier oder mehr** SELECTs; **Spaltentypen** mÃ¼ssen **kompatibel** sein; **Duplikate** werden **entfernt**.
* **UNION ALL** behÃ¤lt **Duplikate** (z. B. gleicher Name als **Land** und **Ort** erscheint doppelt). 

## ðŸ” Unterabfragen (Subqueries)

* **Einsatz**: Einbetten einer Abfrage in **SELECT/WHERE** u. a., um deren **Ergebniswerte** in der Hauptabfrage zu verwenden. Beispiele:
  â€“ **Vergleich mit Aggregat**: Orte mit **Einwohnerzahl > AVG(Einwohner)**.
  â€“ **DELETE mit Subquery**: Orte eines bestimmten Landes lÃ¶schen. 
* **Einzelwert- vs. Mehrwert-Subqueries**:
  â€“ **Einzelwert** â‡’ Vergleichsoperatoren (=, >, â‰¥, <, â‰¤).
  â€“ **Mehrwert** â‡’ **Mengenoperatoren** **IN**, **ANY**, **ALL**, **EXISTS** (Bedeutung siehe Tabelle unten). 
* **Regeln fÃ¼r Unterabfragen (Kurzfassung)**:

  1. **Runde Klammern** verwenden.
  2. **Vergleichsoperatoren** fÃ¼r **einen** RÃ¼ckgabewert;
  3. **Mengenoperatoren** fÃ¼r **mehrere** RÃ¼ckgabewerte;
  4. **ORDER BY** und **UNION** **nicht** in Unterabfragen. 

## ðŸ›¡ï¸ Rechtevergabe (Benutzer & Privilegien)

* **CREATE USER** / **DROP USER** â€“ Benutzer **anlegen** bzw. **lÃ¶schen**.
* **GRANT** **[WITH GRANT OPTION]** â€“ **Rechte** auf Objekte **erteilen** (mit Weitergaberecht).
* **REVOKE** â€“ **Rechte entziehen**.
  Form und Beispiele werden explizit vorgegeben (z. B. **GRANT INSERT, UPDATE ON Ortsverwaltung.Ort TO â€¦**). 

## ðŸ“˜ BegriffsklÃ¤rungen (kompakt)

* **INNER JOIN / LEFT JOIN / RIGHT JOIN / FULL JOIN**: VerknÃ¼pfen Tabellen Ã¼ber **ON**; unterscheiden sich in der **VollstÃ¤ndigkeit** der Ã¼bernommenen Zeilen. 
* **UNION / UNION ALL**: **ZusammenfÃ¼hren** von Ergebnismengen; **UNION** entfernt Duplikate, **UNION ALL** nicht. 
* **Unterabfrage (Subquery)**: **Eingebettete Abfrage**, liefert **einen** oder **mehrere** Werte; wird z. B. in **WHERE** oder **SELECT** genutzt. 
* **Mengenoperatoren**: **IN** (Wert ist in Menge), **ANY** (Bedingung gilt fÃ¼r **mindestens einen** Wert), **ALL** (gilt fÃ¼r **alle** Werte), **EXISTS** (Unterabfrage liefert **mindestens einen Datensatz**). 
* **WITH GRANT OPTION**: Erlaubt dem Benutzer, **erhaltene Rechte weiterzugeben**. 

## ðŸŽ¯ Ergebnis

Mit den erweiterten **SQL-Techniken** â€“ robuste **JOINs**, **UNION/UNION ALL**, **Subqueries** inkl. **Mengenoperatoren** sowie **Benutzer- und Rechteverwaltung** â€“ lassen sich anspruchsvolle **Abfragen** und eine **sichere Mehrbenutzersteuerung** in relationalen Systemen umsetzen. Das Kapitel liefert dafÃ¼r **konkrete Syntax**, **Beispiele** und **Regeln**.
