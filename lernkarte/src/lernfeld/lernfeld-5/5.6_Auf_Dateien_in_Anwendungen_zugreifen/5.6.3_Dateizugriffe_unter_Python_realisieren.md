# 🐍 5.6.3 Dateizugriffe unter Python realisieren [Seite: 567]

Mit **Python** lassen sich Dateien öffnen, lesen, schreiben und schließen. Grundlage aller Dateioperationen sind **Datenströme (Streams)**, auch wenn sie im Programmcode nicht immer sichtbar sind. Dateien können sowohl im **Textmodus** als auch im **Binärmodus** verarbeitet werden.

---

## ⚙️ Grundlegende Vorgehensweise

Jeder Dateizugriff folgt einem festen Ablauf:

1. **Datei öffnen** → Verknüpfung mit einem Stream herstellen
2. **Daten bearbeiten** → Lesen oder Schreiben
3. **Datei schließen** → Stream schließen

Das geschieht mit der eingebauten Funktion:

```python
open(dateiname, modus)
```

Diese Funktion öffnet eine Datei in einem bestimmten **Modus** und gibt ein **Dateiobjekt** zurück.

---

## 📋 Wichtige Übergabeparameter von `open()`

| Parameter | Beschreibung                                                                                                            |
| --------- | ----------------------------------------------------------------------------------------------------------------------- |
| `r`       | **Read:** Öffnet eine Datei zum Lesen (Standardmodus). Existiert die Datei nicht, wird ein Fehler ausgegeben.           |
| `a`       | **Append:** Öffnet eine Datei zum Schreiben, um sie zu erweitern. Wird die Datei nicht gefunden, wird sie neu angelegt. |
| `w`       | **Write:** Öffnet eine Datei zum Schreiben und überschreibt ihren Inhalt. Existiert sie nicht, wird sie neu erstellt.   |
| `x`       | **Create:** Legt eine neue, leere Datei an. Existiert sie bereits, wird eine Fehlermeldung ausgegeben.                  |
| `+`       | Öffnet eine Datei zum **Lesen und Schreiben**.                                                                          |
| `t`       | Öffnet eine Datei im **Textmodus** (Standardeinstellung).                                                               |
| `b`       | Öffnet eine Datei im **Binärmodus**.                                                                                    |

Kombinationen sind möglich, z. B. `open("daten.txt", "r+")` für Lesen **und** Schreiben.

---

## 📖 (1) Lesen von Textdateien

Zum Lesen einer Datei wird sie mit `open()` im **Lesemodus („r“) geöffnet**.
Die Funktion liefert ein Dateiobjekt mit mehreren Methoden.

| Funktion      | Beschreibung                                                         |
| ------------- | -------------------------------------------------------------------- |
| `close()`     | Schließt eine geöffnete Datei.                                       |
| `read(n)`     | Liest **n Bytes** (oder die ganze Datei, wenn n fehlt).              |
| `readline(n)` | Liest **eine Zeile** der Datei (optional begrenzt durch n Bytes).    |
| `readlines()` | Liest **alle Zeilen** und gibt sie als **Liste von Strings** zurück. |

### 🧩 Beispiel: Lesen einer Textdatei

```python
import sys

try:
    file = open("textdatei_lesen.py", "r")
    text = file.read()
    print(text)
    file.close()
except IOError:
    print("Datei kann nicht geöffnet werden.")
except:
    print("Es ist ein Fehler aufgetreten:", sys.exc_info()[0])
```

**Erläuterung:**

* Die Datei wird geöffnet und ihr Inhalt vollständig gelesen.
* Danach wird sie wieder geschlossen.
* Fehler (z. B. fehlende Datei) werden über **`try-except`** abgefangen.

---

## ✍️ (2) Schreiben von Textdateien

Zum Schreiben wird die Datei im **Schreibmodus („w“) geöffnet**.
Existiert sie nicht, wird sie automatisch erstellt.

| Funktion            | Beschreibung                                                       |
| ------------------- | ------------------------------------------------------------------ |
| `close()`           | Schließt die Datei.                                                |
| `write(text)`       | Schreibt den übergebenen Text in die Datei.                        |
| `writelines(liste)` | Schreibt eine Liste von Strings in die Datei (ohne Zeilenumbruch). |

### 🧩 Beispiel: Schreiben einer Textdatei

```python
import sys

try:
    text = input("Bitte Text eingeben:\n")
    file = open("Beispiel.txt", "w")
    file.write(text)
    file.close()
    print("Datei wurde erfolgreich geschrieben.")
except IOError:
    print("Datei konnte nicht geöffnet werden.")
except:
    print("Es ist ein Fehler aufgetreten:", sys.exc_info()[0])
```

**Erläuterung:**

* Der Benutzer gibt einen Text ein.
* Der Text wird in die Datei **„Beispiel.txt“** geschrieben.
* Das Programm gibt eine Erfolgsmeldung aus oder behandelt Ausnahmen.

---

## 💡 Erweiterungen und Übungsansätze

* Benutzer soll den **Pfad** zur zu öffnenden Datei eingeben können.
* Benutzer kann festlegen, **wie viele Zeilen** aus einer Datei angezeigt werden.
* Anpassung früherer Programme, z. B. das **Temperaturprogramm aus Kapitel 5.5.6**, um:

  * Eingabedaten in einer **CSV-Datei** zu speichern,
  * sie wieder einzulesen und
  * weiterzuverarbeiten.
* Weitere Übungen zum Lesen und Schreiben von **CSV-Dateien** befinden sich im Arbeitsbuch.

---

## 🧠 Kernaussagen

* **Streams** sind die Grundlage für Dateioperationen in Python.
* Dateien können im **Text- oder Binärmodus** geöffnet werden.
* Die Funktion **`open()`** erstellt den Zugriff, **`close()`** beendet ihn.
* **Fehlerbehandlung** erfolgt über `try-except`.
* Lesen erfolgt mit `read()`, `readline()`, `readlines()`.
* Schreiben erfolgt mit `write()` oder `writelines()`.
* **CSV-Dateien** sind ideal, um strukturierte Daten einfach zu speichern und wieder einzulesen.


---
