# üßÆ 5.7.5 Die Datenbanksprache SQL anwenden [Seite: 593]

**SQL (Structured Query Language)** ist die Standardsprache f√ºr **relationale Datenbanken**. Mit ihr werden **Datenstrukturen definiert**, **Daten ver√§ndert/abgefragt** und **Zugriffsrechte sowie Transaktionen** gesteuert. Es existieren **ANSI-/ISO-Standards** (u. a. SQL-87, -89, -92, -1999, -2003, -2006, -2008, -2011, -2016); Herstellerdialekte k√∂nnen leicht abweichen.

| Begriff                                  | Definition                                                                                            |
| ---------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| **DDL** (*Data Definition Language*)     | Befehle zur **Definition/√Ñnderung** von Datenstrukturen (z. B. **CREATE**, **ALTER**, **DROP**).      |
| **DML** (*Data Manipulation Language*)   | Befehle zur **Bearbeitung/Abfrage** von Daten (z. B. **SELECT**, **INSERT**, **UPDATE**, **DELETE**). |
| **DCL** (*Data Control Language*)        | Befehle zur **Rechtevergabe** (z. B. **GRANT**, **REVOKE**).                                          |
| **TCL** (*Transaction Control Language*) | Befehle zur **Transaktionssteuerung** (z. B. **COMMIT**, **ROLLBACK**).                               |

## ‚úçÔ∏è Syntaktische Grundlagen & Operatoren

* **Schreibweise:** Gro√ü/Kleinschreibung egal; Anweisungen i. d. R. mit **Semikolon** abschlie√üen.
* **Zeichenketten:** in **'‚Ä¶'** oder **"‚Ä¶"**.
* **Vergleichsoperatoren:** `=`, `>`, `>=`, `<`, `<=`, `<>`.
* **Logische Operatoren:** **AND**, **OR**, **NOT** (Klammern f√ºr Priorit√§ten).
* **Rechenoperatoren:** `+`, `-`, `*`, `/`.
* **Zuweisung:** `=` (z. B. in **SET**).
* **NULL:** steht f√ºr ‚Äûnicht definiert‚Äú; Tests mit **IS NULL** / **IS NOT NULL**.
* **Typische ANSI-SQL-Datentypen:** **INTEGER**, **BIGINT**, **NUMERIC/NUMBER(n,m)**, **FLOAT/DOUBLE**, **VARCHAR(n)**, **CHAR(n)**, **DATE/TIME/TIMESTAMP**, **BOOLEAN**.

## üß± DDL ‚Äì Tabellen anlegen/√§ndern/l√∂schen

* **CREATE TABLE** ‚Äì Tabelle mit Spalten & Constraints erstellen (z. B. **PRIMARY KEY**, **FOREIGN KEY**, **NOT NULL**, **AUTOINCREMENT**).
* **ALTER TABLE ‚Ä¶ ADD COLUMN ‚Ä¶** ‚Äì Spalte hinzuf√ºgen.
* **ALTER TABLE ‚Ä¶ MODIFY COLUMN ‚Ä¶** ‚Äì Datentyp einer Spalte √§ndern.
* **ALTER TABLE ‚Ä¶ DROP COLUMN ‚Ä¶** ‚Äì Spalte l√∂schen.
* **DROP TABLE ‚Ä¶** ‚Äì Tabelle l√∂schen (entfernt alle Datens√§tze & Struktur).

## ‚úèÔ∏è DML ‚Äì Datens√§tze einf√ºgen/√§ndern/l√∂schen

* **INSERT INTO ‚Ä¶ (Spalten) VALUES (Werte)** ‚Äì neuen Datensatz einf√ºgen (Autowerte/IDs werden vom System vergeben).
* **UPDATE ‚Ä¶ SET Spalte = Wert [WHERE ‚Ä¶]** ‚Äì Werte √§ndern; ohne **WHERE** werden **alle** Zeilen ge√§ndert. Zum ‚ÄûL√∂schen‚Äú einzelner Feldinhalte **`= NULL`** setzen.
* **DELETE FROM ‚Ä¶ [WHERE ‚Ä¶]** ‚Äì **ganze Datens√§tze** l√∂schen; ohne **WHERE** wird die Tabelle geleert.

## üîé SELECT ‚Äì Daten abfragen (Grundform)

**SELECT** `[DISTINCT]` *Spalten* `[AS Alias]`
**FROM** *Tabelle(n) [Alias]*
`[WHERE` *Bedingungen* `]`
`[GROUP BY` *Spalten* `[HAVING` *Bedingungen* `]]`
`[ORDER BY` *Spalten* *(ASC|DESC)* `]`

* **DISTINCT** reduziert Duplikate in der Ergebnismenge.
* **WHERE** filtert Zeilen (Bedingungen kombinierbar mit **AND/OR/NOT**).
* **BETWEEN**: Bereichsabfrage (`x BETWEEN a AND b`).
* **LIKE**: Mustervergleich mit **%** (beliebig viele Zeichen) und **_** (genau ein Zeichen).

  * Beispiele: `Name LIKE 'm%'` (beginnt mit m), `Name LIKE '%mann%'` (enth√§lt ‚Äûmann‚Äú).
* **Berechnungen** sind in SELECT m√∂glich (z. B. `Gewicht/(Groesse*Groesse) AS BMI`).
* **ORDER BY**: Sortierung auf-/absteigend; mehrere Spalten m√∂glich.

## ‚àë Aggregatfunktionen & Gruppierung

* **COUNT(Spalte)** ‚Äì Anzahl definierter Werte (NULLs werden nicht gez√§hlt)
* **SUM(Spalte)** ‚Äì Summe
* **MIN(Spalte)** / **MAX(Spalte)** ‚Äì Minimum/Maximum
* **AVG(Spalte)** ‚Äì Durchschnitt
* **GROUP BY** gruppiert Zeilen; **HAVING** filtert **Gruppen** (im Gegensatz zu WHERE = Zeilenfilter).

## üîó Abfragen √ºber mehrere Tabellen (Joins)

* **INNER JOIN** ‚Äì nur verkn√ºpfte Zeilen beider Tabellen.
* **LEFT JOIN** ‚Äì alle Zeilen der linken Tabelle + passende der rechten.
* **RIGHT JOIN** ‚Äì alle Zeilen der rechten Tabelle + passende der linken.
* **FULL JOIN** ‚Äì alle Zeilen beider Tabellen, verkn√ºpft wo m√∂glich.

*Beispielidee:* Personen mit Wohnort ‚ÄûHamburg‚Äú √ºber **INNER JOIN** zwischen **Person** und **Wohnort** filtern.

## üóìÔ∏è Datums-/Zeitfunktionen (Beispiel SQLite)

* **`date('now')`** ‚Üí aktuelles Datum (YYYY-MM-DD)
* **`date('now','start of month','+1 month','-1 day')`** ‚Üí letzter Tag des aktuellen Monats
* **`time(‚Ä¶)`**, **`datetime(‚Ä¶)`** analog f√ºr Zeit bzw. Datum+Zeit

---

## üß≠ Kompakte ‚ÄûCheat-Sheet‚Äú-√úbersicht

* **Struktur:** `CREATE/ALTER/DROP TABLE`
* **Daten √§ndern:** `INSERT`, `UPDATE`, `DELETE` (+ **WHERE**)
* **Abfrage:** `SELECT ‚Ä¶ FROM ‚Ä¶ [WHERE] [GROUP BY/HAVING] [ORDER BY]`
* **Operatoren:** Vergleiche, **AND/OR/NOT**, **BETWEEN**, **LIKE**, **IS NULL**
* **Aggregat & Gruppen:** **COUNT/SUM/MIN/MAX/AVG**, **GROUP BY**, **HAVING**
* **Joins:** **INNER/LEFT/RIGHT/FULL JOIN**
* **Transaktionen/Rechte:** **COMMIT/ROLLBACK**, **GRANT/REVOKE**

**Kernziel:** Mit SQL **Tabellen definieren**, **Daten konsistent bearbeiten** und **zielgerichtet abfragen** ‚Äì inkl. **Gruppierung, Aggregation, Sortierung** und **Tabellenverkn√ºpfungen**.


---

## [N√§chstes Thema](./5.7.6_Eine_SQLite-Datenbank_mit_Python_ansprechen.md)