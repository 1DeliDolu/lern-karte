# üß™ 2.5 Ein cyber-physisches System in Betrieb nehmen [Seite: 132]

Ziel dieses Abschnitts: Das bestehende **CPS** (Temperatur & Luftfeuchtigkeit) wird als **Versuchsaufbau** nachgebaut, um es anschlie√üend um einen **C0‚ÇÇ-Sensor** zu erweitern. Danach folgen **Programmierung**, **Vernetzung (MQTT)**, **Funktionstest mit Protokoll** sowie ein **Review (Lessons Learned)**. 

| **Begriff**                 | **Definition**                                                                                                                      |
| --------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| **Prototyp**                | Funktionsf√§higes, vereinfachtes **Modell** eines geplanten Produkts zur **Funktionsanalyse** und fr√ºhem **Feedback** (Prototyping). |
| **Arduino-IDE / Sketch**    | In C++ geschriebene Programme (‚Äû**Sketch**‚Äú) f√ºr **Arduino/ESP32**; Compile & Upload auf das Board.                                 |
| **MQTT-Broker**             | Server (z. B. **Mosquitto**), der **Publish/Subscribe**-Nachrichten von Clients vermittelt (**Topics**).                            |
| **Node-RED**                | Grafisches **Flow**-Werkzeug mit **Nodes** zum Verbinden von Hardware, Protokollen und Services; Visualisierung/Dashboard.          |
| **Inbetriebnahmeprotokoll** | Dokumentation, die **Funktionst√ºchtigkeit** und **Sicherheit** einer Anlage nachweist (branchen-/rechtskontextabh√§ngig).            |
| **Lessons Learned**         | **Projektretrospektive** zur systematischen **Erfahrungs- und Erkenntnissicherung** f√ºr k√ºnftige Projekte.                          |

## üîß 2.5.1 CPS-Prototyp konstruieren

* **Aufgabe:** Aufbau eines **Versuchsprototyps** auf Basis **Arduino** (bzw. **ESP32**), **Breadboard**, Verkabelung sowie **Sensoren/Aktoren**; saubere **Dokumentation** (z. B. mit *Fritzing*).
* **Prototyping-Arten:**

  1. **Explorativ** (Idee/Funktion tragf√§hig?), 2) **Evolution√§r** (Akzeptanz, fehlende Features), 3) **Experimentell** (neue Realisierungswege).
* **Hardware-Prototyp-Stufen:** (1) **Versuchsaufbau**, (2) **Vorf√ºhrmodell** (Design-Attrappe), (3) **Funktionsprototyp** im Design, (4) **Nullserie** kurz vor Produktion. 

## üíª 2.5.2 Software des erweiterten CPS programmieren

* **IDE & Sprache:** **Arduino-IDE** (C++), Programm hei√üt **Sketch**.
* **Grundstruktur eines Sketches:**

  * **Bereich 1:** Libraries, **Variablen**, **Konstanten**, **Initialisierung**.
  * **`void setup()`**: Einmalige **Startkonfiguration** (Pins, Modi, Schnittstellen).
  * **`void loop()`**: **Hauptschleife** (kontinuierlicher Ablauf).
* **Unterst√ºtzung:** **Serieller Monitor** f√ºr Werte/Fehler; **Kommentare** `//` bzw. `/* ‚Ä¶ */`.
* **H√§ufige Fehlerquellen:** (a) falsches/fehlendes **Board-Profil** in der IDE, (b) **Syntaxfehler** (z. B. Klammern, Semikolon). 

## üîó 2.5.3 MQTT-Broker und Client verbinden

* **Brokerwahl & Betrieb:** **Mosquitto** auf **Raspberry Pi** als **MQTT-Broker**.
* **Topics (Beispiel):** `esp32/temperature`, `esp32/humidity`, `esp32/CO2`.
* **Ablauf:** **ESP32** publiziert Messwerte ‚Üí **Broker** verteilt ‚Üí **Subscriber** (z. B. **Node-RED**) empf√§ngt und **visualisiert** (Dashboard). Ohne Broker **keine Vermittlung**.
* **Node-RED:** Erstellung von **Flows** mit Ein-/Verarbeitungs-/Ausgabe-**Nodes**; schnelle **Kopplung** von CPS, MQTT und UI. 

## ‚úÖ 2.5.4 Funktionalit√§t pr√ºfen & protokollieren

* **Warum dokumentieren?** Mit der **Inbetriebnahme** gehen **Pflichten** (Betriebssicherheits-/Haftungsfragen) auf den **Betreiber** √ºber; die **st√∂rungsfreie Nutzung** ist nachzuweisen (**Inbetriebnahmeprotokoll**).
* **Kritische Inbetriebnahmen nur durch Fachkr√§fte:**

  * **Elektrotechnik** (elektrische **Betriebssicherheit**, Messungen, Protokoll).
  * **Telekommunikationstechnik** (Netz-/Nutzer-/Verschl√ºsselungs-**Konfiguration**).
  * **Sicherheitstechnik** (Fehlalarme vermeiden, **Datenschutz**, **Zugriffsschutz**).
* **Validierung:** **Funktionstest**, **Referenzmessger√§t** zum Abgleich, **Ergebnisse protokollieren**. 

## üîÅ 2.5.5 Review: Projektergebnisse & -erkenntnisse erfassen (Lessons Learned)

* **Ziele:** **Erfahrungen sammeln**, **analysieren**, **dokumentieren**, damit **Fehler** k√ºnftig vermieden und **Bew√§hrtes** beibehalten wird.
* **Inhalte:** Positive/negative **Erfahrungen**, **fachliche Erkenntnisse**, **Prozessbeobachtungen**, **Transparenz** f√ºr andere Teams.
* **Anl√§sse:** Projekt (nahezu) **abgeschlossen**; starke **Emotionen** (Euphorie/Frust); Bedarf an **Standardweiterentwicklung**.
* **Leitfragen:** Was lief **gut/schlecht**? Was **lernen** Einzelne/Organisation? Was **beibehalten/√§ndern**? Wie **dokumentieren** & **umsetzen**? 

### üß≠ Empfohlene Prozessschritte (kurz)

1. **Versuchsaufbau** (CPS alt) ‚Üí **Erweiterung** um **C0‚ÇÇ-Sensor**.
2. **Software** erstellen & testen (**Sketch**, serieller Monitor, Debugging).
3. **MQTT-Kopplung** (Broker, Topics, Node-RED-Flows, Dashboard).
4. **Funktionstest** + **Validierung** + **Inbetriebnahmeprotokoll**.
5. **Lessons Learned** dokumentieren & Ma√ünahmen ableiten. 


 
