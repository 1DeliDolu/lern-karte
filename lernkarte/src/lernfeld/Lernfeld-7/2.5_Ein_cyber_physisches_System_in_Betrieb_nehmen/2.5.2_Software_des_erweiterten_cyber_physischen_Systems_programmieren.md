# üíª 2.5.2 Software des erweiterten cyber-physischen Systems programmieren [Seite: 133]

Aufgabe: Das **Programm** f√ºr das erweiterte **CPS** (Arduino/ESP32) in der **Arduino-IDE** (C++) erstellen, **pr√ºfen**, **kompilieren** und auf den **Mikrocontroller** **hochladen**. Die Programme hei√üen **Sketch** und besitzen eine **dreiteilige Grundstruktur** (Bereich 1, `setup()`, `loop()`); Ausgaben und Fehlermeldungen lassen sich √ºber den **seriellen Monitor** kontrollieren. 

| **Begriff**              | **Definition**                                                                                                                                  |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| **Arduino-IDE**          | Integrierte Entwicklungsumgebung zur Programmierung von **Arduino/ESP32** in **C++**; Kompilieren und **Upload** des **Sketch** auf das Board.  |
| **Sketch**               | Programm f√ºr Arduino/ESP32 mit **Grundstruktur aus drei Bereichen** (Bereich 1, `void setup()`, `void loop()`).                                 |
| **Bibliothek**           | Erweiterung des Funktionsumfangs (z. B. Sensor-/Aktor-Befehle) durch **Programmbibliotheken**.                                                  |
| **Variable / Konstante** | **Deklaration** von Variablen und **Definition** von Konstanten im globalen Bereich (Bereich 1).                                                |
| **`void setup()`**       | Einmalig beim Start ausgef√ºhrter Teil (z. B. **Pin-Konfiguration**, Ein-/Ausg√§nge festlegen).                                                   |
| **`void loop()`**        | **Hauptschleife**: wiederholt den Programmlauf kontinuierlich.                                                                                  |
| **Serieller Monitor**    | Anzeige von **Messwerten** und **Fehlermeldungen** zur **Kontrolle/Debugging**.                                                                 |
| **Kommentar**            | Markierung von Erl√§uterungen im Code (z. B. `// ‚Ä¶`), sichtbar im Beispiel-Sketch.                                                               |

## üß† Grundstruktur des Sketch

* **Bereich 1 (Globaler Teil):** **Bibliotheken** einbinden, **Variablen** deklarieren, **Konstanten** definieren, **Sensoren/Aktoren initialisieren**. (Nicht in jedem Sketch zwingend.) 
* **Bereich 2 ‚Äì `void setup()`**: Einmalige **Startkonfiguration** (u. a. **Pinbelegung** und **Ein-/Ausgang**). Auch ohne Inhalt **erforderlich**. 
* **Bereich 3 ‚Äì `void loop()`**: **Kontinuierliche Ablaufsteuerung**; nach jedem Durchlauf startet der **Loop** automatisch neu. 

## üîç Test & Debugging

* **Serieller Monitor** zur **Direktausgabe** von Messwerten und f√ºr **Fehlerhinweise** beim **Debugging** (z. B. Sensorpr√ºfung). 
* **Typische Fehlerquellen:**

  * **Falsches Board** in der IDE gew√§hlt/nicht korrekt installiert ‚Üí **Upload-Fehler**; in der **Board-Verwaltung** korrigieren. 
  * **Syntaxfehler** (falsch geschriebene Bezeichner, **fehlende Klammer/Semikolon**). 

## üß≠ Vorgehensschritte (Kurzleitfaden)

1. **Arduino-IDE** √∂ffnen, **Board** und **Port** korrekt w√§hlen. 
2. **Bereich 1**: ben√∂tigte **Bibliotheken** einbinden; **Variablen/Konstanten** definieren; **Sensor/Aktor** initialisieren. 
3. **`setup()`**: **Pins** und Schnittstellen konfigurieren. 
4. **`loop()`**: **Mess-/Steuerlogik** zyklisch implementieren. 
5. **Kompilieren & Upload**, anschlie√üend **Seriellen Monitor** zur **Funktionskontrolle** nutzen; **Fehler** (Board/Syntax) beheben.

---
